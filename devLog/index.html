<!DOCTYPE html>
<html>
<head lang="fr">
    <meta charset="UTF-8">
    <title>DevLog</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="devlog.css">
</head>
<body>
    <div id="log">
        <ul id="list">
            <li>
                <section class="head">
                    <div class="expand"></div>
                    Improvements
                    <button class="add-button">Add</button>
                </section>
                <section class="content">
                </section>
            </li>
            <li>
                <section class="head">
                    <div class="expand"></div>
                    New Features
                    <button class="add-button">Add</button>
                </section>
                <section class="content">
                </section>
            </li>
            <li>
                <section class="head">
                    <div class="expand"></div>
                    Bugs
                    <button class="add-button">Add</button>
                </section>
                <section class="content">
                </section>
            </li>
            <li>
                <section class="head">
                    <div class="expand"></div>
                    Bugfixes
                    <button class="add-button">Add</button>
                </section>
                <section class="content">
                </section>
            </li>
        </ul>
    </div>
</body>
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="js/notificationAgent.js"></script>
<script type="text/javascript">
    $(".expand").click(function(){
        $(this).parent().parent().children(".content").last().slideToggle();
    });
    $(".add-button").click(function(){
        var button = $(this);
        var category = $(this).parent().parent().children(".content").last();
        if(category.children(".input-wrapper").length == 0) {
            category.prepend("<div class='input-wrapper'><input></div>");
            category.prepend("<img src='icons/ic_publish_black_24dp.png' class='send' />");
            category.prepend("<div class='close'></div>");
            $(".close", category).click(function(){
                $(this).next().remove();
                $(this).next().remove();
                $(this).remove();
            });
            $('input', category).keyup(function(event){
                if(event.keyCode == 13){
                    if($(this).val() != "") {
                        category.prepend("<p>" + $(this).val() + "<span class='edit'>EDIT</span>"  + "<span class='delete'></span>" + "</p>");
                        $(".close", category).next().remove();
                        $(".close", category).remove();
                        $(this).parent().remove();
                        $(button).trigger("click");
                    }
                    else
                        $(this).attr("placeholder", "Vide !");
                }
            });
            $('.send', category).click(function(){
                if($('input', category).val() != "") {
                    category.prepend("<p>" + $('input', category).val() + "<span class='edit'>EDIT</span>"  + "<span class='delete'></span>" + "</p>");
                    $(this).next().remove();
                    $(this).prev().remove();
                    $(this).remove();
                }
                else
                    $('input', category).attr("placeholder", "Vide !");
            });
            category.slideDown();
        }
        else
            category.slideDown();
        category.children().children("input").last().focus();
    });
</script>
</html>